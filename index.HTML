<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SYSTEM : GLITCH | FINAL v19</title>
    <style>
        /* --- 1. Global & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Orbitron:wght@400;600;800;900&family=Exo+2:wght@300;500;700&family=Nanum+Gothic:wght@400;700;800&family=Share+Tech+Mono&display=swap');
        
        :root {
            --bg-color: #050505;
            --primary-blue: #0051ff;
            --tech-cyan: #00f0ff;
            --alert-red: #ff2a2a;
            --text-main: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--bg-color); 
            color: var(--text-main); 
            font-family: 'Exo 2', 'Nanum Gothic', sans-serif; 
            overflow-x: hidden;
            background-image: 
                linear-gradient(rgba(0, 81, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 81, 255, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            background-attachment: fixed;
            padding-bottom: 100px;
            min-height: 100vh;
        }

        /* Particles */
        #bg-particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; overflow: hidden; }
        .particle { 
            position: absolute; background: var(--tech-cyan); opacity: 0; 
            animation: floatUp linear infinite; box-shadow: 0 0 5px var(--tech-cyan); 
        }
        @keyframes floatUp { 
            0% { transform: translateY(105vh) rotate(0deg); opacity: 0; } 
            20% { opacity: 0.5; } 80% { opacity: 0.5; } 
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } 
        }

        /* --- 2. Header --- */
        .hud-frame {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            border: 8px solid transparent; pointer-events: none; z-index: 8000;
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.8);
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1) 0px, rgba(0,0,0,0.1) 1px, transparent 1px, transparent 2px);
            background-size: 100% 3px;
        }

        .top-header {
            width: 100%; height: 70px;
            display: flex; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.8); border-bottom: 1px solid rgba(0, 81, 255, 0.3);
            backdrop-filter: blur(5px); z-index: 1000; position: relative;
        }
        .nav-logo { 
            font-family: 'Black Han Sans', sans-serif; 
            font-weight: 400; color: #fff; font-size: 1.5rem; 
            display: flex; align-items: center; gap: 10px; 
            text-shadow: 0 0 15px rgba(0, 240, 255, 0.6);
        }
        .nav-logo span { color: var(--tech-cyan); margin-left: 5px; }

        /* --- Hero Section --- */
        .hero-container {
            width: 95%; max-width: 1000px; margin: 30px auto;
            position: relative; z-index: 5;
        }
        .hero-frame {
            position: relative; width: 100%; border: 1px solid var(--primary-blue);
            box-shadow: 0 0 30px rgba(0, 81, 255, 0.2);
            background: #000; overflow: hidden; border-radius: 4px;
        }
        .glitch-wrapper { position: relative; width: 100%; height: auto; overflow: hidden; }
        .hero-img { width: 100%; display: block; filter: contrast(1.1) brightness(0.9); position: relative; z-index: 1; }
        
        .glitch-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/4ae1ad46-c15f-4fe6-9c39-d2e8686c7f49.jpeg') no-repeat center/cover;
            background-size: 100% auto; opacity: 0; pointer-events: none; z-index: 2;
            mix-blend-mode: hard-light;
        }
        .glitch-layer:nth-child(2) { animation: glitch-anim 2s infinite linear alternate-reverse; background-color: rgba(0, 240, 255, 0.3); background-blend-mode: overlay; }
        .glitch-layer:nth-child(3) { animation: glitch-anim 2.5s infinite linear alternate-reverse; animation-delay: 0.2s; background-color: rgba(0, 81, 255, 0.3); background-blend-mode: overlay; }
        @keyframes glitch-anim {
            0% { opacity: 0; clip-path: inset(50% 0 50% 0); transform: translate(0); }
            5% { opacity: 0.8; clip-path: inset(10% 0 60% 0); transform: translate(-5px, 2px); }
            10% { opacity: 0.4; clip-path: inset(80% 0 5% 0); transform: translate(5px, -2px); }
            15% { opacity: 0; transform: translate(0); }
            80% { opacity: 0; }
            85% { opacity: 0.6; clip-path: inset(40% 0 40% 0); transform: translate(-2px, 2px); }
            100% { opacity: 0; }
        }

        .overlay-text {
            position: absolute; bottom: 30px; left: 30px; z-index: 6;
            background: rgba(0,0,0,0.85); padding: 15px 25px;
            border-left: 4px solid var(--tech-cyan); backdrop-filter: blur(4px);
        }
        .ot-title { font-family: 'Orbitron'; font-size: 1.4rem; font-weight: 900; color: var(--tech-cyan); margin-bottom: 5px; }
        .ot-sub { font-size: 0.85rem; color: #ccc; font-family: 'Share Tech Mono'; }

        /* --- Tabs --- */
        .tab-nav {
            display: flex; justify-content: center; gap: 15px;
            width: 95%; max-width: 1400px; margin: 0 auto 40px;
            z-index: 10; position: relative;
        }
        .tab-btn {
            flex: 1; max-width: 250px;
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid var(--primary-blue);
            color: #8899aa; padding: 15px 0; cursor: pointer;
            font-family: 'Black Han Sans', sans-serif; font-size: 1.2rem;
            transition: 0.3s; text-align: center; letter-spacing: 1px;
            clip-path: polygon(10% 0, 100% 0, 100% 100%, 0% 100%, 0% 20%);
        }
        .tab-btn:hover { background: rgba(0, 81, 255, 0.2); color: #fff; border-color: var(--tech-cyan); }
        .tab-btn.active {
            background: var(--tech-cyan); color: #000; border-color: var(--tech-cyan);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
        }

        /* --- Content Layout --- */
        .content-area { width: 95%; max-width: 1400px; margin: 0 auto; position: relative; z-index: 5; }
        .page-section { display: none; animation: fadeIn 0.4s ease-out; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Dashboard Interface --- */
        .tactical-interface {
            background: rgba(5, 8, 12, 0.95);
            border: 1px solid #333;
            margin-top: 10px;
            box-shadow: 0 0 40px rgba(0, 81, 255, 0.1);
            position: relative; overflow: hidden;
        }
        .ti-top-bar {
            height: 4px; width: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--tech-cyan), var(--primary-blue));
            background-size: 200% 100%;
            animation: gradientShift 3s linear infinite;
            box-shadow: 0 0 15px var(--tech-cyan);
        }
        @keyframes gradientShift { 0% { background-position: 100% 0; } 100% { background-position: -100% 0; } }

        .ti-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 25px;
            background: linear-gradient(180deg, rgba(0, 81, 255, 0.1), transparent);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .ti-title { font-family: 'Orbitron'; font-weight: 900; color: #fff; font-size: 1.3rem; letter-spacing: 2px; display: flex; align-items: center; gap: 10px; }
        .ti-title::before { content: '///'; color: var(--tech-cyan); }
        .ti-status {
            font-family: 'Share Tech Mono'; color: var(--tech-cyan); font-size: 0.8rem;
            border: 1px solid var(--tech-cyan); padding: 4px 8px; border-radius: 2px;
            background: rgba(0, 240, 255, 0.1); animation: blinkStatus 2s infinite;
        }
        @keyframes blinkStatus { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }

        .dash-layout {
            display: grid; grid-template-columns: 2fr 1fr;
            min-height: 250px;
        }
        
        .dash-log {
            padding: 30px;
            border-right: 1px solid rgba(255,255,255,0.05);
            background-image: radial-gradient(rgba(0, 81, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            position: relative;
        }
        .typewriter { 
            font-family: 'Nanum Gothic'; color: #e0f0ff; line-height: 1.8; font-size: 1.2rem; word-break: keep-all; 
            text-shadow: 0 0 5px rgba(0, 81, 255, 0.5); position: relative; z-index: 2;
        }
        .cursor { display: inline-block; width: 10px; height: 20px; background: var(--tech-cyan); animation: blink 0.8s infinite; vertical-align: sub; }

        .dash-stats {
            padding: 20px;
            display: flex; flex-direction: column; gap: 15px;
            background: rgba(0,0,0,0.3);
        }
        .stat-box {
            border: 1px solid rgba(0, 81, 255, 0.3);
            background: rgba(0, 20, 40, 0.5);
            padding: 10px;
        }
        .sb-title { font-family: 'Share Tech Mono'; font-size: 0.8rem; color: #888; margin-bottom: 5px; display: block; }
        
        .sb-gauge-wrap { width: 100%; height: 8px; background: #111; border: 1px solid #333; position: relative; overflow: hidden; }
        .sb-gauge-fill { 
            width: 45%; height: 100%; background: var(--alert-red); 
            box-shadow: 0 0 10px var(--alert-red);
            animation: gaugeJitter 0.5s infinite;
        }
        @keyframes gaugeJitter { 0% { width: 45%; } 50% { width: 42%; } 100% { width: 47%; } }
        .sb-val { float: right; font-family: 'Orbitron'; font-size: 0.9rem; color: var(--alert-red); }

        .sb-circle-wrap { display: flex; align-items: center; gap: 15px; }
        .sb-circle {
            width: 40px; height: 40px; border-radius: 50%;
            border: 3px solid #333; border-top: 3px solid var(--tech-cyan); border-left: 3px solid var(--tech-cyan);
            animation: spin 2s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .sb-circle-text { font-size: 0.8rem; color: #ccc; }

        .alert-box {
            border: 1px solid var(--alert-red); color: var(--alert-red);
            padding: 10px; font-family: 'Orbitron'; font-size: 0.8rem; text-align: center;
            background: rgba(255, 0, 0, 0.1); animation: pulseAlert 1s infinite alternate;
        }
        @keyframes pulseAlert { from { opacity: 0.6; } to { opacity: 1; } }

        .ti-footer {
            padding: 10px 25px;
            background: rgba(0, 0, 0, 0.6);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .ti-code { font-family: 'Share Tech Mono'; color: #555; font-size: 0.7rem; letter-spacing: 1px; }
        .ti-deco-bar { display: flex; gap: 4px; }
        .ti-bit { width: 6px; height: 15px; background: #222; transform: skewX(-20deg); }
        .ti-bit.on { background: var(--primary-blue); animation: bitPulse 1s infinite alternate; }
        .ti-bit.on:nth-child(2) { animation-delay: 0.2s; }
        .ti-bit.on:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bitPulse { from { opacity: 0.3; } to { opacity: 1; } }

        /* Guide Bubble Styles */
        .guide-box { 
            display: flex; 
            align-items: flex-start; /* PC Default */
            gap: 30px; /* PC Gap Increase */
            margin-bottom: 30px; 
            animation: slideInLeft 0.5s ease-out; 
        }
        @keyframes slideInLeft { from { opacity:0; transform:translateX(-20px); } to { opacity:1; transform:translateX(0); } }
        
        .guide-avatar-frame { flex-shrink: 0; }
        .guide-avatar { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5)); transform: scale(1.1); }
        
        .guide-bubble {
            background: rgba(15, 25, 40, 0.9); border: 1px solid var(--tech-cyan);
            padding: 25px; border-radius: 15px; position: relative; flex: 1; margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .guide-bubble::before {
            content:''; position: absolute; top: 30px; left: -9px;
            border-top: 10px solid transparent; border-bottom: 10px solid transparent; border-right: 10px solid var(--tech-cyan);
        }
        .gb-name { font-family: 'Black Han Sans'; color: var(--tech-cyan); font-size: 1.6rem; margin-bottom: 8px; }
        .gb-text { font-family: 'Nanum Gothic'; font-size: 1.2rem; color: #ddd; line-height: 1.6; }


        /* World DB (Adjusted for more space) */
        .db-grid { 
            display: grid; 
            gap: 30px; /* [수정] 간격 증가 */
            padding-bottom: 50px; 
            /* [수정] 최소 너비를 늘려서 여유롭게 배치 */
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
        }
        .db-card {
            background: rgba(15, 20, 30, 0.9); border: 1px solid rgba(0, 81, 255, 0.3);
            transition: 0.3s;
        }
        .db-head { background: rgba(0, 50, 150, 0.2); padding: 15px; display: flex; justify-content: space-between; border-bottom: 1px solid rgba(0,81,255,0.3); }
        .db-title { font-family: 'Black Han Sans'; color: var(--tech-cyan); }
        .db-code { font-family: 'Share Tech Mono'; color: var(--primary-blue); }
        
        .db-body { 
            padding: 30px; /* [수정] 내부 여백 증가 (20px -> 30px) */
        }
        .db-list li { 
            list-style: none; 
            margin-bottom: 15px; /* [수정] 리스트 간격 증가 */
            padding-left: 15px; 
            position: relative; 
            color: #ccc; 
            font-size: 1.1rem; 
            line-height: 1.8; /* [수정] 줄간격 추가로 가독성 확보 */
        }
        .db-list li::before { content:''; position: absolute; left: 0; top: 10px; width: 4px; height: 4px; background: var(--tech-cyan); }
        .hl { color: #fff; font-weight: bold; } .hl-red { color: var(--alert-red); } .hl-gold { color: #ffd700; }
        
        /* Squad Grid */
        .char-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding-bottom: 50px; }
        .char-card { height: 400px; position: relative; cursor: pointer; background: #000; clip-path: polygon(0 0, 100% 0, 100% 90%, 85% 100%, 0 100%); border: 1px solid #333; transition: 0.3s; }
        .char-card:hover { border-color: var(--tech-cyan); transform: translateY(-5px); }
        .char-bg-img { width: 100%; height: 100%; object-fit: cover; filter: grayscale(0.8); transition: 0.5s; }
        .char-card:hover .char-bg-img { filter: grayscale(0); }
        .char-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); }
        .c-name { color: #fff; font-family: 'Black Han Sans'; font-size: 1.5rem; text-shadow: 0 0 5px #000; }
        .c-rank { position: absolute; top: 10px; right: 10px; font-family: 'Orbitron'; font-weight: 900; font-size: 2rem; color: #fff; font-style: italic; }
        .rank-S { color: #ffd700; } .rank-A { color: #ff0055; } .rank-B { color: #00f0ff; }

        /* Command Grid (Spacing Update) */
        .cmd-grid { 
            display: grid; 
            gap: 30px; /* [수정] 카드 사이 간격 넓힘 */
            padding-bottom: 50px; 
            /* [수정] minmax를 400px로 대폭 늘려서 PC에서 2열로 시원하게 배치되도록 유도 */
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); 
        }
        
        .cmd-card { 
            display: flex; align-items: center; 
            padding: 25px; /* [수정] 내부 패딩 증가 */ 
            gap: 20px; 
            border-left: 4px solid var(--tech-cyan);
            background: rgba(15, 20, 30, 0.9); border: 1px solid rgba(0, 81, 255, 0.3);
            transition: 0.3s;
        }
        .cmd-card:hover { transform: translateX(5px); background: rgba(0, 81, 255, 0.15); }
        .cmd-icon { 
            font-family: 'Orbitron'; font-size: 1.2rem; color: var(--tech-cyan); font-weight: 900; 
            background: rgba(0,240,255,0.1); padding: 15px; border-radius: 5px; 
            min-width: 100px; text-align: center; /* PC default */
        }
        .cmd-title { font-family: 'Black Han Sans'; color: #fff; font-size: 1.2rem; margin-bottom: 8px; }
        .cmd-text { color: #bbb; font-size: 0.95rem; line-height: 1.5; }

        /* --- PC Specifics --- */
        @media (min-width: 769px) {
            .guide-avatar-frame { 
                width: 220px; height: 220px; /* PC 캐릭터 크기 */
            }
        }

        /* --- Mobile Specifics (The Big Update) --- */
        @media (max-width: 768px) {
            .hero-container { margin: 10px auto; width: 95%; }
            .overlay-text { bottom: 0; left: 0; width: 100%; padding: 10px; border-left: none; border-top: 2px solid var(--tech-cyan); }
            .ot-title { font-size: 0.9rem; }
            .ot-sub { font-size: 0.7rem; }
            
            /* [수정] 모바일 캐릭터 대폭 확대 */
            .guide-box { 
                gap: 5px; 
                align-items: center; 
            }
            .guide-avatar-frame { 
                /* 기존 100px -> 150px로 1.5배 확대 */
                width: 150px; height: 150px; 
                margin-top: 15px; 
            }
            .guide-bubble { padding: 15px; margin-top: 10px; }
            .gb-name { font-size: 1.2rem; }
            .gb-text { font-size: 0.9rem; }
            
            .char-grid { grid-template-columns: repeat(2, 1fr); }
            .char-card { height: 250px; }
            .tab-btn { font-size: 0.9rem; padding: 12px 0; }
            .typewriter { font-size: 1rem; }
            .tactical-interface { margin-top: 20px; }
            
            .dash-layout { grid-template-columns: 1fr; }
            .dash-log { border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1); }

            /* [모바일] 명령어 카드 가로 정렬 강제 */
            .cmd-grid { grid-template-columns: 1fr; }
            .cmd-card {
                flex-direction: row;
                align-items: center;
                gap: 15px;
                padding: 20px; /* 모바일은 패딩 약간 축소 */
            }
            .cmd-icon {
                min-width: auto; 
                width: 70px; 
                font-size: 0.9rem;
                padding: 10px 5px;
                flex-shrink: 0;
            }
            .cmd-desc { flex: 1; }
        }

        /* Modal */
        #modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 10000; display: flex; justify-content: flex-end; opacity: 0; pointer-events: none; transition: 0.3s; }
        #modal-overlay.active { opacity: 1; pointer-events: all; }
        .side-panel { width: 100%; max-width: 500px; background: #0a0a12; height: 100%; transform: translateX(100%); transition: 0.3s; overflow-y: auto; border-left: 1px solid var(--primary-blue); }
        #modal-overlay.active .side-panel { transform: translateX(0); }
        .panel-header { height: 300px; position: relative; }
        .panel-img { width: 100%; height: 100%; object-fit: cover; object-position: top; }
        .panel-close { position: fixed; top: 20px; right: 20px; color: var(--alert-red); font-weight: bold; font-size: 2rem; cursor: pointer; z-index: 20; background: rgba(0,0,0,0.5); border-radius: 50%; width: 40px; height: 40px; text-align: center; line-height: 40px; }
        .panel-content { padding: 30px; color: #fff; }
        .p-name { font-family: 'Black Han Sans'; font-size: 2rem; margin-bottom: 15px; }
        .p-tags span { display: inline-block; border: 1px solid var(--primary-blue); padding: 5px 10px; margin-right: 5px; font-size: 0.8rem; color: var(--tech-cyan); font-family: 'Orbitron'; margin-bottom: 5px; }
        .p-desc-title { margin-top: 20px; color: #ffd700; font-family: 'Orbitron'; font-weight: bold; margin-bottom: 10px; }
        .p-text { color: #ccc; line-height: 1.6; font-size: 0.95rem; }
        .secret-box { border: 1px dashed var(--alert-red); background: rgba(255, 40, 40, 0.05); padding: 15px; margin-top: 20px; }
        .secret-title { color: var(--alert-red); font-family: 'Orbitron'; font-weight: bold; margin-bottom: 5px; }

        /* Intro */
        #intro-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 20000; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.5s; }
        .intro-logo { color: #fff; font-family: 'Orbitron'; font-size: 3rem; font-weight: 900; text-shadow: 0 0 20px var(--primary-blue); margin-bottom: 30px; text-align: center; }
        .enter-btn { background: transparent; border: 2px solid var(--tech-cyan); color: var(--tech-cyan); padding: 15px 40px; font-family: 'Orbitron'; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .enter-btn:hover { background: var(--tech-cyan); color: #000; box-shadow: 0 0 20px var(--tech-cyan); }

        /* BGM Btn */
        #bgm-toggle { position: fixed; bottom: 20px; right: 20px; width: 40px; height: 40px; background: rgba(0,0,0,0.8); border: 1px solid var(--tech-cyan); border-radius: 5px; z-index: 6000; display: flex; justify-content: center; align-items: center; gap: 3px; cursor: pointer; }
        .eq-bar { width: 3px; background: var(--tech-cyan); animation: eq 1s infinite; }
        @keyframes eq { 0%, 100% { height: 5px; } 50% { height: 20px; } }
        #bgm-toggle.paused .eq-bar { animation: none; height: 3px; background: #555; }
        .eq-bar:nth-child(2) { animation-delay: 0.2s; } .eq-bar:nth-child(3) { animation-delay: 0.4s; }

    </style>
</head>
<body>

    <audio id="bgm" loop>
        <source src="https://cheerful-fudge-ac30a5.netlify.app/saranghae_yeong.mp3" type="audio/mpeg">
    </audio>

    <div id="bg-particles"></div>
    <div class="hud-frame"></div>
    
    <div id="intro-overlay">
        <div class="intro-logo">GLITCH<br>SYSTEM</div>
        <button class="enter-btn" onclick="enterSystem()">[ SYSTEM ACCESS ]</button>
    </div>

    <header class="top-header">
        <div class="nav-logo">S급 판정, <span>다시 해주세요</span></div>
    </header>

    <div class="hero-container">
        <div class="hero-frame">
            <div class="glitch-wrapper">
                <div class="glitch-layer"></div>
                <div class="glitch-layer"></div>
                <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/4ae1ad46-c15f-4fe6-9c39-d2e8686c7f49.jpeg" class="hero-img">
            </div>
            <div class="overlay-text">
                <div class="ot-title">TACTICAL MAP: SEOUL</div>
                <div class="ot-sub">SECTOR: 07 // STATUS: UNSTABLE</div>
            </div>
        </div>
    </div>

    <div class="tab-nav">
        <div class="tab-btn active" onclick="switchTab('main', this)"><span>메 인</span></div>
        <div class="tab-btn" onclick="switchTab('world', this)"><span>세계관</span></div>
        <div class="tab-btn" onclick="switchTab('squad', this)"><span>캐릭터</span></div>
        <div class="tab-btn" onclick="switchTab('command', this)"><span>명령어</span></div>
    </div>

    <div class="content-area">
        
        <div id="tab-main" class="page-section active">
            <div class="guide-box">
                <div class="guide-avatar-frame">
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/6bf5b2ed-eddd-4a19-bb87-7c7e8891f5ca.png" class="guide-avatar">
                </div>
                <div class="guide-bubble">
                    <div class="gb-name">이사야</div>
                    <div class="gb-text">"어서 와. 여기가 메인 로비야. 우리가 남긴 '글리치'의 로그를 열람하려면 아래 데이터를 확인해 봐. 꽤 흥미로울 거야."</div>
                </div>
            </div>

            <div class="tactical-interface">
                <div class="ti-top-bar"></div>
                <div class="ti-header">
                    <div class="ti-title">CLASSIFIED DATABASE</div>
                    <div class="ti-status">DECRYPTED</div>
                </div>
                
                <div class="dash-layout">
                    <div class="dash-log">
                        <div class="typewriter" id="story-text"></div>
                    </div>
                    
                    <div class="dash-stats">
                        <div class="stat-box">
                            <span class="sb-title">MENTAL CORRUPTION</span>
                            <span class="sb-val">45%</span>
                            <div class="sb-gauge-wrap"><div class="sb-gauge-fill"></div></div>
                        </div>
                        <div class="stat-box">
                            <span class="sb-title">ETHER SENSITIVITY</span>
                            <div class="sb-circle-wrap">
                                <div class="sb-circle"></div>
                                <span class="sb-circle-text">SYNCING...</span>
                            </div>
                        </div>
                        <div class="alert-box">
                            WARNING: SYSTEM INTERFERENCE DETECTED
                        </div>
                    </div>
                </div>

                <div class="ti-footer">
                    <div class="ti-code">SYS_ID: 409-21-X</div>
                    <div class="ti-deco-bar">
                        <div class="ti-bit on"></div><div class="ti-bit on"></div><div class="ti-bit"></div><div class="ti-bit on"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-world" class="page-section">
            <div class="guide-box">
                <div class="guide-avatar-frame">
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/2d7339bd-a4af-4d73-b851-b32b1aa1ddce.png" class="guide-avatar">
                </div>
                <div class="guide-bubble">
                    <div class="gb-name">재이</div>
                    <div class="gb-text">"세계관 데이터베이스입니다. 현재 서울의 상황, 헌터 등급 체계, 그리고 우리가 주로 처리하는 오염된 게이트에 대한 핵심 정보들이 정리되어 있습니다."</div>
                </div>
            </div>
            <div class="db-grid">
                <div class="db-card"><div class="db-head"><span class="db-title">세계관 개요</span><span class="db-code">W-01</span></div><div class="db-body"><ul class="db-list"><li><span class="hl">배경:</span> 대재앙 발생 10년 후, 폐허와 최첨단 재건 도시가 공존하는 <strong>대한민국 서울</strong>.</li><li><span class="hl">장르:</span> 이능력 배틀물이 가미된 현대 판타지 기반의 <span class="hl-red">아포칼립스</span> 세계관.</li><li><span class="hl">개요:</span> 원인 불명의 게이트 발생으로 던전과 마물이 출현, 이에 대항하는 '헌터'들의 시대.</li></ul></div></div>
                <div class="db-card"><div class="db-head"><span class="db-title">헌터 등급 체계</span><span class="db-code">R-05</span></div><div class="db-body"><ul class="db-list"><li><span class="hl-gold">S급:</span> 국가 권력급 위상을 지닌 전략 병기. 단신으로 도시 재앙 방어 가능.</li><li><span class="hl-red">A급:</span> 상위 1% 엘리트. 대형 길드의 임원급 전력.</li><li><span class="hl">B~C급:</span> 일반 전투원 및 파티원.</li><li><span class="hl">D~E급:</span> 비전투 지원 및 짐꾼. 일반인 취급.</li></ul></div></div>
                <div class="db-card"><div class="db-head"><span class="db-title">주요 조직</span><span class="db-code">O-02</span></div><div class="db-body"><ul class="db-list"><li><span class="hl">한국헌터협회:</span> 각성자 관리 및 게이트 배정을 총괄하는 중앙 기관.</li><li><span class="hl">GLITCH (글리치):</span> 협회 공인 특수 목적팀. 이사야를 필두로 한 이레귤러 스쿼드.</li><li><span class="hl">임무:</span> 일반 헌터가 해결 불가능한 <span class="hl-red">오염된 게이트</span> 전담 처리.</li></ul></div></div>
                <div class="db-card"><div class="db-head"><span class="db-title">게이트 & 던전</span><span class="db-code">G-09</span></div><div class="db-body"><ul class="db-list"><li><span class="hl">게이트:</span> E급부터 S급까지 전국에 불규칙적으로 발생하는 차원문.</li><li><span class="hl">던전 내부:</span> 개미굴, 고대 악마성, 용의 둥지 등 다양한 이계의 환경.</li><li><span class="hl">위험 구역:</span> 게이트 주변 반경은 마기 영향 및 몬스터 출몰 빈도가 높음.</li></ul></div></div>
            </div>
        </div>

        <div id="tab-squad" class="page-section">
            <div class="guide-box">
                <div class="guide-avatar-frame">
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/4e440f03-8a51-4e8a-a57f-4ade49f0ab67.png" class="guide-avatar">
                </div>
                <div class="guide-bubble">
                    <div class="gb-name">반</div>
                    <div class="gb-text">"우리 팀원들이야. 다들 성격이 좀... 어딘가 망가져 있긴 한데, 실력 하나는 확실해. 궁금하면 카드를 눌러서 자세히 봐."</div>
                </div>
            </div>
            <div class="char-grid">
                <div class="char-card" onclick="openModal(0)">
                    <span class="c-rank rank-S">S</span>
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/46d64c42-af83-4691-b654-9f0e9f2566ff.png" class="char-bg-img" style="object-position: 40% top;">
                    <div class="char-overlay"><h3 class="c-name">이사야</h3></div>
                </div>
                <div class="char-card" onclick="openModal(1)">
                    <span class="c-rank rank-A">A</span>
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/db11b198-40da-4247-9766-fc8c421d4569.png" class="char-bg-img">
                    <div class="char-overlay"><h3 class="c-name">태경</h3></div>
                </div>
                <div class="char-card" onclick="openModal(2)">
                    <span class="c-rank rank-B">B</span>
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/8d8c447c-041a-42d5-94eb-b879b1581b9d.png" class="char-bg-img" style="object-position: 25% top;">
                    <div class="char-overlay"><h3 class="c-name">반</h3></div>
                </div>
                <div class="char-card" onclick="openModal(3)">
                    <span class="c-rank rank-A">A</span>
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/9a4bf3e3-3d99-4e19-af4a-f2d1b7f95c62.png" class="char-bg-img">
                    <div class="char-overlay"><h3 class="c-name">재이</h3></div>
                </div>
            </div>
        </div>

        <div id="tab-command" class="page-section">
            <div class="guide-box">
                <div class="guide-avatar-frame">
                    <img src="https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/cd3878a2-0ddd-40a7-9a42-e9b80d7d3a52.png" class="guide-avatar">
                </div>
                <div class="guide-bubble">
                    <div class="gb-name">태경</div>
                    <div class="gb-text">"야, 신입. 헷갈리면 이것만 기억해. 시스템 명령어 모음이다. 멍청하게 굴지 말고 필요할 때 써먹어. 특히 사칭 같은 거."</div>
                </div>
            </div>
            <div class="cmd-grid">
                <div class="cmd-card">
                    <div class="cmd-icon">!요약</div>
                    <div class="cmd-desc"><div class="cmd-title">상황 브리핑</div><div class="cmd-text">최근 10~20턴 내의 내용을 요약하여 현재 상황을 빠르게 파악합니다.</div></div>
                </div>
                <div class="cmd-card">
                    <div class="cmd-icon">!점검</div>
                    <div class="cmd-desc"><div class="cmd-title">캐릭터 상태 점검</div><div class="cmd-text">현재 캐릭터의 성격이나 설정이 붕괴되지 않았는지 시스템이 점검하고 수정합니다.</div></div>
                </div>
                <div class="cmd-card">
                    <div class="cmd-icon">!사칭</div>
                    <div class="cmd-desc"><div class="cmd-title">사칭방지</div><div class="cmd-text">{user}의 역할을 AI가 플레이 도중 사칭하거나 헷갈려할 때, 즉시 역할을 재조정합니다.</div></div>
                </div>
                <div class="cmd-card">
                    <div class="cmd-icon">!진행</div>
                    <div class="cmd-desc"><div class="cmd-title">스토리 자동 진행</div><div class="cmd-text">이야기가 정체될 때 사용하세요. 새로운 게이트 임무나 돌발 이벤트를 발생시켜 서사를 강제로 진행시킵니다.</div></div>
                </div>
                <div class="cmd-card">
                    <div class="cmd-icon">!진실</div>
                    <div class="cmd-desc"><div class="cmd-title">거짓 간파</div><div class="cmd-text">이사야의 거짓말을 감지합니다. 그가 숨기고 있는 의도나 진실을 시스템 권한으로 강제 분석하여 표시합니다.</div></div>
                </div>
            </div>
        </div>

    </div>

    <div id="modal-overlay">
        <div class="side-panel">
            <div class="panel-header">
                <div class="panel-close" onclick="closeModal()">✕</div>
                <img id="m-img" src="" class="panel-img">
            </div>
            <div class="panel-content">
                <div class="p-name" id="m-name">NAME</div>
                <div class="p-tags">
                    <span class="p-tag" id="m-rank">RANK</span>
                    <span class="p-tag accent" id="m-role">ROLE</span>
                    <span class="p-tag" id="m-age">AGE</span>
                    <span class="p-tag" id="m-mbti">MBTI</span>
                </div>
                <div class="p-desc-title">BACKGROUND LOG</div>
                <p class="p-text" id="m-bg"></p>
                <div class="secret-box">
                    <div class="secret-title">⚠ RESTRICTED</div>
                    <p class="p-text" id="m-hidden" style="margin:0; font-weight:bold; color:var(--alert-red);"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="bgm-toggle" class="paused" onclick="toggleBgm()">
        <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('bg-particles');
            for (let i=0; i<30; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.left = Math.random()*100 + 'vw';
                p.style.animationDuration = (Math.random()*15 + 10) + 's';
                p.style.animationDelay = (Math.random()*5) + 's';
                const s = Math.random()*8 + 3;
                p.style.width = s+'px'; p.style.height = s+'px';
                container.appendChild(p);
            }
        });

        function switchTab(tabName, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');
        }

        function enterSystem() {
            document.getElementById('intro-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('intro-overlay').style.display = 'none';
                startTypewriter();
                const bgm = document.getElementById('bgm');
                bgm.volume = 0.5;
                bgm.play().then(() => {
                    document.getElementById('bgm-toggle').classList.remove('paused');
                }).catch(()=>{});
            }, 500);
        }

        const text = "> SYSTEM: DATABASE ACCESSED.\n> TARGET: GLITCH SQUAD.\n\n정해진 궤도를 이탈한 이레귤러들.\n시스템의 오류, '글리치'의 기록이다.\n\n우리는 헌터 협회가 감당하지 못하는 오염된 게이트를 전담하는 특수 목적팀이다. 통제 불능의 S급 이사야를 필두로, 각자의 사연을 가진 결함 있는 자들이 모였다.\n\n이곳은 우리들의 데이터가 기록된 비공식 서버.\n당신이 무엇을 원하든, 그 이상의 진실을 마주하게 될 것이다.\n\n[ SYSTEM: 데이터 로드 완료. 접근 권한 승인. ]";
        let ti = 0;
        function startTypewriter() {
            const el = document.getElementById('story-text');
            if (ti < text.length) {
                el.innerHTML = text.substring(0, ti+1).replace(/\n/g, "<br>") + '<span class="cursor"></span>';
                ti++;
                setTimeout(startTypewriter, 35);
            }
        }

        function toggleBgm() {
            const bgm = document.getElementById('bgm');
            const btn = document.getElementById('bgm-toggle');
            if (bgm.paused) { bgm.play(); btn.classList.remove('paused'); }
            else { bgm.pause(); btn.classList.add('paused'); }
        }

        const db = [
            { 
                name: "이사야", age: "29세(남)", rank: "S-RANK", role: "LEADER", mbti: "INTJ", 
                bg: "상류층 정치 가문 출신으로 최연소 각성을 이루었으나, 현재는 협회 공인 특수 목적팀 '글리치'의 리더이자 정보상으로 활동 중이다. 오로지 자신의 통제와 재미, 그리고 유희를 동기로 삼아 움직인다.",
                hidden: "싸이코패스 성향을 지녔다. 겉으로는 가짜 친절과 나사 빠진 듯한 여유를 보이지만, 속은 감정이 철저히 결여되어 있고 잔혹하다. 능구렁이처럼 거짓말과 기만에 능숙하며, 금단 현상이 오면 손을 떠는 심각한 꼴초다.",
                img: "https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/46d64c42-af83-4691-b654-9f0e9f2566ff.png"
            },
            { 
                name: "태경", age: "28세(남)", rank: "A-RANK", role: "SWORDSMAN", mbti: "ENTJ", 
                bg: "한때 펜싱 천재로 불렸으나 경기 중 상대의 도발에 넘어가 사고를 치고 선수 생명이 끝났다. 각성 후에는 강자와의 전투와 단순한 승부욕을 충족하기 위해 헌터가 되었다.",
                hidden: "오만하고 결벽증이 심하며 승부사 기질이 강하다. 겉으로는 여유롭고 건방지며 타인을 하대하는 태도를 보이지만, 그 이면에는 깊은 애정결핍과 인정욕구가 자리 잡고 있다.",
                img: "https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/db11b198-40da-4247-9766-fc8c421d4569.png"
            },
            { 
                name: "반", age: "25세(남)", rank: "B-RANK", role: "FIGHTER", mbti: "ISTP", 
                bg: "뒷골목 고아 출신으로 거친 거리 생활을 하다 각성했다. 이사야에게 직접 스카우트되어 팀에 합류했으며, 그를 통해 소속감을 느끼고 가족을 찾는 것을 목표로 한다. 연애 경험은 없다.",
                hidden: "냉정하고 무심한 성격이다. 겉으로는 다가가기 쉬워 보이지만 철벽을 치는 스타일이며, 속으로는 언제 버려질지 모른다는 유기불안을 겪고 있다. 칭찬에 약하고 표현이 서툰 츤데레다.",
                img: "https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/8d8c447c-041a-42d5-94eb-b879b1581b9d.png"
            },
            { 
                name: "재이", age: "26세(남)", rank: "A-RANK", role: "ICE MAGE", mbti: "ISTJ", 
                bg: "원래는 탄탄대로를 걷던 엘리트였으나, 이사야에게 치명적인 약점을 잡혀 반강제로 '글리치'에 합류했다. 팀의 사고를 수습하고 식사를 챙기는 등 실질적인 살림꾼이다.",
                hidden: "완벽주의자이자 독설가다. 겉으로는 차갑고 엄격하게 선을 긋지만, 속으로는 누구보다 팀원들의 생존에 집착하며 뒤에서 묵묵히 챙겨주는 헌신적인 면모가 있다.",
                img: "https://d394jeh9729epj.cloudfront.net/8xTOAWIktzO-KKKOUjdKSk1a/9a4bf3e3-3d99-4e19-af4a-f2d1b7f95c62.png"
            }
        ];

        function openModal(idx) {
            const d = db[idx];
            document.getElementById('m-img').src = d.img;
            document.getElementById('m-name').innerText = d.name;
            const rankEl = document.getElementById('m-rank');
            rankEl.innerText = d.rank.split('-')[0];
            rankEl.className = 'p-tag';
            if(d.rank.startsWith('S')) rankEl.style.borderColor = '#ffd700';
            else if(d.rank.startsWith('A')) rankEl.style.borderColor = '#ff0055';
            else rankEl.style.borderColor = '#00f0ff';
            
            document.getElementById('m-role').innerText = d.role;
            document.getElementById('m-age').innerText = d.age;
            document.getElementById('m-mbti').innerText = d.mbti;
            document.getElementById('m-bg').innerText = d.bg;
            document.getElementById('m-hidden').innerText = d.hidden;
            document.getElementById('modal-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    </script>
</body>
</html>